
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, width=device-width">
    <style type="text/css">
      html, body, .map {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
      }
    </style>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.0.0/css/ol.css" type="text/css">

    <script src="http://openlayers.org/en/v3.15.1/build/ol.js" type="text/javascript"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/proj4js/2.2.1/proj4.js" type="text/javascript"></script>


    <title>Bus Delay Map</title>
  </head>
  <body>
        <div id="map" class="map"></div>
    <script type="text/javascript">
       
        var projection = ol.proj.get('EPSG:3857');
        var projectionExtent =  [300000,6000000,1000000,6700000];
        var map = new ol.Map({
            controls: ol.control.defaults({
            attributionOptions: /** @type {olx.control.AttributionOptions} */ ({
            collapsible: false
            })
            }),
        target: 'map',
        layers: [

       

       new ol.layer.Tile({
            title: 'basemap ',
            //opacity: 0.7,
            extent: projectionExtent,
            visible: true,
            source: new ol.source.WMTS({
              url: 'http://wmts1.geoportail.lu/opendata/wmts/{Layer}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.png',
              layer: 'basemap_2015_global',
              matrixSet: 'GLOBAL_WEBMERCATOR_4_V3',
              requestEncoding: /** @type {ol.source.WMTSRequestEncoding} */ ('REST'),
              format: 'image/png',
              projection: projection,
              tileGrid: new ol.tilegrid.WMTS({
                origin: [-20037508.3428, 20037508.3428],
                resolutions: [156543.033928, 78271.516964, 39135.758482, 19567.879241, 9783.9396205,
4891.96981025, 2445.98490513, 1222.99245256, 611.496226281, 305.748113141, 152.87405657,
76.4370282852, 38.2185141426, 19.1092570713, 9.55462853565, 4.77731426782, 2.38865713391,
1.19432856696, 0.597164283478, 0.298582141739],
                matrixIds: [
                                0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17,18,19
                              ]
              }),
              style: 'default'
            
          })
      }),
      new ol.layer.Heatmap({
              title: 'added Layer',
              weight:'return delay/10',
              opacity: 0.3,
              source: new ol.source.Vector({
                 projection : 'EPSG:3857',
                 url: '/latest',
                 format: new ol.format.GeoJSON()
              })
           }),
      new ol.layer.Vector({
              title: 'added Layer',
              source: new ol.source.Vector({
                 projection : 'EPSG:3857',
                 url: '/latest',
                 format: new ol.format.GeoJSON()
              })
           })


      ],
        view: new ol.View({
          center: ol.proj.transform([6.12865,49.61177 ], 'EPSG:4326', 'EPSG:3857'),
          zoom: 13
        })
      });
  

    </script>
  </body>
</html>

